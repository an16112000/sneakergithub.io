{"ast":null,"code":"import { VND } from \"../changeCurrency/changeCurrency\";\nimport { getRateJp, getRateKor } from \"../rate\";\nimport { instance, instanceKream } from \"../services\";\nimport { getIdProductKream } from \"../getDataFromKream/getIdProductKream\";\nimport GetDataFromSNKRDUNK from \"../getDataFromSNKRDUNK\";\nimport { getSalesHistorySNKRDUNK } from '../getDataFromSNKRDUNK/getSalesHistorySNKRDUNK';\nexport const getDataMenu = async (type, page) => {\n  const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`);\n  const rateKor = await getRateKor();\n  const rateJp = await getRateJp();\n  const rate = await Promise.all(['https://wise.com/rates/history+live?source=JPY&target=VND&length=30&resolution=hourly&unit=day', 'https://wise.com/rates/history+live?source=KRW&target=VND&length=30&resolution=hourly&unit=day'].map(url => fetch(url))).then(responses => responses.map(response => response.json())).then;\n  console.log(rate);\n  const data = response.data.data.product_info.list.map(item => {\n    for (let i = 0; i < item.model_no.length; i++) {\n      if (item.model_no[i] == ' ' || item.model_no[i] == '/') {\n        item.model_no = item.model_no.slice(0, -item.model_no.length + i);\n      }\n    }\n    // const responseJP = await instance.get(`https://snkrdunk.com/v1/products/CW2288-111/sales-history?`)\n    // console.log(responseJP)\n    return {\n      code: item.model_no,\n      type: item.brand_name_eng,\n      min_priceSoldOut: VND.format(Math.floor(item.min_price * rateKor)),\n      name: item.name_eng,\n      img: item.image_path\n    };\n  });\n  const arrKor = [];\n  for (let i = 0; i < data.length; i++) {\n    const result = await data[i];\n    arrKor.push(result);\n  }\n  // for(let i=0; i<data.length; i++) {\n  //     arrKor[i] = {\n  //         ...arrKor[i],\n  //         a:1\n  //     }\n  // }\n\n  for (let i = 0; i < arrKor.length; i++) {\n    try {\n      let isPriceSnkrDunkOk = false;\n      let isSnkrDunkOk = false;\n      let isHistorySnkrDunkOk = false;\n      let isHistoryKreamOk = false;\n      let isPriceKreamOk = false;\n      let isKreamOk = false;\n      const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`);\n      const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`);\n      const historySnkrDunk = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n      console.log(historySnkrDunk);\n      if (historySnkrDunk && historySnkrDunk.length > 7) {\n        isHistorySnkrDunkOk = true;\n      }\n      const min_priceJp = Math.floor(responseJP.data.minPrice * rateJp);\n      const min_priceKream = Math.floor(responseKream.data.items[0].product.market.lowest_ask * rateKor);\n      console.log(min_priceJp - min_priceKream);\n      if (min_priceJp - min_priceKream >= 1000000) {\n        isPriceSnkrDunkOk = true;\n      } else if (min_priceKream - min_priceJp >= 1000000) {\n        isPriceKreamOk = true;\n      }\n      if (isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n        isSnkrDunkOk = true;\n      }\n      arrKor[i] = {\n        ...arrKor[i],\n        min_priceJp: VND.format(min_priceJp),\n        min_priceKream: VND.format(min_priceKream),\n        isSnkrDunkOk: isSnkrDunkOk,\n        isKreamOk: isKreamOk\n      };\n    } catch (msg) {\n      return arrKor[i];\n    }\n    console.log(arrKor);\n  }\n  return arrKor;\n};","map":{"version":3,"names":["VND","getRateJp","getRateKor","instance","instanceKream","getIdProductKream","GetDataFromSNKRDUNK","getSalesHistorySNKRDUNK","getDataMenu","type","page","response","get","rateKor","rateJp","rate","Promise","all","map","url","fetch","then","responses","json","console","log","data","product_info","list","item","i","model_no","length","slice","code","brand_name_eng","min_priceSoldOut","format","Math","floor","min_price","name","name_eng","img","image_path","arrKor","result","push","isPriceSnkrDunkOk","isSnkrDunkOk","isHistorySnkrDunkOk","isHistoryKreamOk","isPriceKreamOk","isKreamOk","responseJP","responseKream","historySnkrDunk","min_priceJp","minPrice","min_priceKream","items","product","market","lowest_ask","msg"],"sources":["/Users/doandinhan/Documents/workspace/getDataSNKRDUNK/getdata/src/DataMenu/getDataMenu.js"],"sourcesContent":["import { VND } from \"../changeCurrency/changeCurrency\";\nimport { getRateJp, getRateKor } from \"../rate\"\nimport { instance, instanceKream } from \"../services\"\nimport { getIdProductKream } from \"../getDataFromKream/getIdProductKream\";\nimport GetDataFromSNKRDUNK from \"../getDataFromSNKRDUNK\";\nimport {getSalesHistorySNKRDUNK} from '../getDataFromSNKRDUNK/getSalesHistorySNKRDUNK'\n\nexport const getDataMenu = async (type, page) => {\n    const response = await instance.get(`https://www.soldout.co.kr/api/v3/search/get-item-list?&typeGb=goods&pageIndex=${page}&pageSize=12&keyword=${type}`)\n    const rateKor = await getRateKor();\n    const rateJp = await getRateJp();\n    const rate = await Promise.all(['https://wise.com/rates/history+live?source=JPY&target=VND&length=30&resolution=hourly&unit=day', 'https://wise.com/rates/history+live?source=KRW&target=VND&length=30&resolution=hourly&unit=day'].map(\n        (url) => fetch(url)\n    )).then(\n        responses => responses.map(response=>response.json())\n    ).then\n    console.log(rate)\n    const data = response.data.data.product_info.list.map(\n        (item) => {\n            for (let i = 0; i < item.model_no.length; i++) {\n                if (item.model_no[i] == ' ' || item.model_no[i] == '/') {\n                    item.model_no = item.model_no.slice(0, -item.model_no.length + i)\n                }\n            }\n            // const responseJP = await instance.get(`https://snkrdunk.com/v1/products/CW2288-111/sales-history?`)\n            // console.log(responseJP)\n            return {\n                code: item.model_no,\n                type: item.brand_name_eng,\n                min_priceSoldOut: VND.format(Math.floor(item.min_price*rateKor)),\n                name: item.name_eng,\n                img: item.image_path\n            }\n\n        }\n    )\n    const arrKor = []\n    for(let i = 0; i<data.length;i++) {\n        const result = await data[i]\n        arrKor.push(result)\n    }\n    // for(let i=0; i<data.length; i++) {\n    //     arrKor[i] = {\n    //         ...arrKor[i],\n    //         a:1\n    //     }\n    // }\n\n    for(let i=0; i<arrKor.length; i++) {\n        try {\n            let isPriceSnkrDunkOk = false\n            let isSnkrDunkOk = false\n            let isHistorySnkrDunkOk = false\n            let isHistoryKreamOk = false\n            let isPriceKreamOk = false\n            let isKreamOk = false\n            const responseJP = await instance.get(`https://snkrdunk.com/v1/products/${arrKor[i].code}/sales-history?`)\n            const responseKream = await instanceKream.get(`https://kream.co.kr/api/p/tabs/all/?keyword=${arrKor[i].code}&request_key=59f3e93d-13b1-4df1-9690-558260cb6bc3`)\n            const historySnkrDunk  = await getSalesHistorySNKRDUNK(arrKor[i].code, '');\n            console.log(historySnkrDunk)\n            if(historySnkrDunk && historySnkrDunk.length>7) {\n                isHistorySnkrDunkOk = true\n            }\n            const min_priceJp = (Math.floor(responseJP.data.minPrice*rateJp))\n            const min_priceKream = (Math.floor(responseKream.data.items[0].product.market.lowest_ask*rateKor))\n            console.log(min_priceJp-min_priceKream)\n            \n            if(min_priceJp-min_priceKream>=1000000) {\n                isPriceSnkrDunkOk = true\n            } else if(min_priceKream-min_priceJp>=1000000) {\n                isPriceKreamOk = true\n            }\n\n            if(isHistorySnkrDunkOk && isPriceSnkrDunkOk) {\n                isSnkrDunkOk = true\n            }\n            arrKor[i] = {\n                ...arrKor[i],\n                min_priceJp: VND.format(min_priceJp),\n                min_priceKream: VND.format(min_priceKream),\n                isSnkrDunkOk: isSnkrDunkOk,\n                isKreamOk: isKreamOk\n            }\n        } catch(msg) {\n            return arrKor[i]\n        }\n        console.log(arrKor)\n    }\n    return arrKor\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}